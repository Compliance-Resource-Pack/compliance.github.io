---
layout: default
---

{%- if page.discontinued -%}
	<h2 class="red banner">This project has been discontinued.</h2>
{%- endif -%}

{%- if page.title -%}
	<h2 class="display-3 my-5 text-center">
		{{ page.title }}
	</h2>
{%- endif -%}

{%- if page.header-img -%}
	<img class="fancy-card-1x" style="width: 100%" src="{{ page.header-img }}" alt="">
	<br>
{%- endif -%}

<br>

{%- if page.carousel-img -%}
<!-- {{ page.carousel-img }} -->
<div class="card card-body">
	<div id="carousel-img">

		{%- for image in site.static_files -%}
			{%- if image.path contains page.carousel-img -%}
				<div class="item">
					<img
						onclick="ShowFullscreen('{{ site.baseurl }}{{ image.path }}')"
						id="{{ image.basename | replace: " ", "_" }}"
						src="{{ site.baseurl }}{{ image.path }}"
						alt="{{ image.basename }}"
					>
					{%- if page.show_carousel_name == true -%}<h4>{{ image.basename }}</h4>{%- endif -%}
				</div>
			{%- endif -%}
		{%- endfor -%}

	</div>
</div>

<hr>

<div id="SF" class="modal">
	<span id="SF-Span" class="close">&times;</span>
	<img id="SF-Img" class="modal-content">
</div>

<script>
	function ShowFullscreen(imgPath) {
		const modal = document.getElementById('SF')
		modal.style.display = 'block'

		// close modal:
		const span = document.getElementById('SF-Span')
		span.onclick = () => {
			modal.style.display = 'none';
		}
		// when pressing escape key:
		document.addEventListener('keydown', (event) => {
			if (event.keyCode == 27) modal.style.display = 'none'
		})

		// set img in modal:
		const img = document.getElementById('SF-Img')
		img.src = imgPath
	}
</script>
{%- endif -%}

{%- if page.description -%}
<div class="card card-body">
	<p class="h4 m-0">
		{{ page.description }}
	</p>
</div>

<hr>
{%- endif -%}

{%- if page.downloads -%}
{%- include article_download.html downloads=page.downloads -%}
{%- endif -%}

{%- if page.changelog -%}
<div id="changelog-container">
	<br>
	<h2 class="display-4 my-5 text-center">Changelog</h2>
	<div class="card card-body">
		<div id='changelog'></div>
	</div>
</div>
<script>
	function formatChangelog (obj, lvl = 3) {
		if (typeof obj === "string") return `<li class="card-title">${obj}</li>`;
		if (Array.isArray(obj))
			return `<ul>${obj.map((e) => formatChangelog(e, lvl + 1)).join('')}</ul>`;
		return Object.entries(obj)
			.map(([key, val]) =>
				`<h${lvl} class="card-title text-left">${key}:</h${lvl}>${formatChangelog(val, lvl + 1)}`)
			.join('');
	}

	let changelogObj;
	try {
		// jekyll doesn't escape json so we have to do it ourselves (mfw)
		changelogObj = JSON.parse(`{{ page.changelog | jsonify | replace: '"', '\"' }}`);
		document.getElementById('changelog').innerHTML = formatChangelog(changelogObj);
	} catch (err) {
		console.error(err);
		document.getElementById("changelog-container").innerHTML = "";
	}
</script>
{%- endif -%}

<br>

<a href="https://discord.gg/sN9YRQbBv7">
	<p class="blurple banner">
		Start a discussion in our Discord!
	</p>
</a>
